{"version":3,"sources":["../../../pciWiquid/views/js/pciCreator/dev/delor/creator/tpl/propertiesForm!tpl","../../../pciWiquid/views/js/pciCreator/dev/delor/creator/widget/states/Question.js","../../../pciWiquid/views/js/pciCreator/dev/delor/creator/widget/states/states.js","../../../pciWiquid/views/js/pciCreator/dev/delor/creator/widget/Widget.js","../../../pciWiquid/views/js/pciCreator/dev/delor/creator/tpl/markup!tpl","../../../pciWiquid/views/js/pciCreator/dev/delor/pciCreator.js"],"names":["define","hb","template","Handlebars","depth0","helpers","partials","data","this","compilerInfo","merge","stack1","helper","options","buffer","helperMissing","escapeExpression","__","hash","call","identifier","serial","stateFactory","Question","formElement","simpleEditor","containerEditor","formTpl","_","$","delorInteractionStateQuestion","extend","$container","widget","$prompt","find","interaction","element","create","change","text","updateMarkup","markup","markupSelector","related","destroy","prototype","initForm","_widget","$form","response","getResponseDeclaration","html","attr","initWidget","setChangeCallbacks","i","value","id","factory","states","createBundle","arguments","Widget","delorInteractionWidget","clone","initCreator","registerStates","prompt","markupTpl","getTypeIdentifier","getWidget","getDefaultProperties","pci","afterCreate","each","index","el","getMarkupTemplate","getMarkupData","defaultData","PCI"],"mappings":"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","file":"pciCreator.min.js","sourcesContent":["\ndefine('tpl!delor/creator/tpl/propertiesForm', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"panel\\\">\\n  <p><b>PCI conçue par la DEPP</b></p>\\n  <p>Ministère de l'éducation nationale</p>\\n  <p>France</p>\\n  <p>Réalisation <a href='http://www.wiquid.fr' target=\\\"_blank\\\">Wiquid</a></p>\\n\\n</div>\\n\\n<div class=\\\"panel\\\">\\n    <label for=\\\"\\\" class=\\\"has-icon\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"Response identifier\", options) : helperMissing.call(depth0, \"__\", \"Response identifier\", options)))\n    + \"</label>\\n    <span class=\\\"icon-help tooltipstered\\\" data-tooltip=\\\"~ .tooltip-content:first\\\" data-tooltip-theme=\\\"info\\\"></span>\\n    <div class=\\\"tooltip-content\\\">\"\n    + escapeExpression((helper = helpers.__ || (depth0 && depth0.__),options={hash:{},data:data},helper ? helper.call(depth0, \"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options) : helperMissing.call(depth0, \"__\", \"The identifier of the choice. This identifier must not be used by any other response or item variable. An identifier is a string of characters that must start with a Letter or an underscore (\\\"_\\\") and contain only Letters, underscores, hyphens (\\\"-\\\"), period (\\\".\\\", a.k.a. full-stop), Digits, CombiningChars and Extenders.\", options)))\n    + \"</div>\\n\\n    <input type=\\\"text\\\" \\n           name=\\\"identifier\\\" \\n           value=\\\"\";\n  if (helper = helpers.identifier) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.identifier); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \"\\\" \\n           placeholder=\\\"e.g. RESPONSE\\\" \\n           data-validate=\\\"$notEmpty; $qtiIdentifier; $availableIdentifier(serial=\";\n  if (helper = helpers.serial) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.serial); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  buffer += escapeExpression(stack1)\n    + \");\\\">\\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\nCopyright DEPP - Ministère de l'éducation nationale \n*/\n\ndefine('delor/creator/widget/states/Question',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/states/Question',\n    'taoQtiItem/qtiCreator/widgets/helpers/formElement',\n    'taoQtiItem/qtiCreator/editor/simpleContentEditableElement',\n    'taoQtiItem/qtiCreator/editor/containerEditor',\n    'tpl!delor/creator/tpl/propertiesForm',\n    'lodash',\n    'jquery'\n], function(stateFactory, Question, formElement, simpleEditor, containerEditor, formTpl, _, $){\n\n    \"use strict\";\n\n    var delorInteractionStateQuestion = stateFactory.extend(Question, function(){ \n\n\n        var $container = this.widget.$container,\n            $prompt = $container.find('.prompt'), \n            interaction = this.widget.element;  \n\n        containerEditor.create($prompt, { \n            change : function change(text){ \n                interaction.data('prompt', text);\n                interaction.updateMarkup();\n            },\n            markup : interaction.markup, \n            markupSelector : '.prompt',\n            related : interaction\n        });\n\n\n    }, function(){\n\n        var $container = this.widget.$container,\n            $prompt = $container.find('.prompt');\n\n        simpleEditor.destroy($container);\n        containerEditor.destroy($prompt);\n    });\n\n    delorInteractionStateQuestion.prototype.initForm = function initForm(){\n        \n        var _widget = this.widget,\n            $form = _widget.$form,\n            interaction = _widget.element,\n            response = interaction.getResponseDeclaration();\n\n        //render the form using the form template\n        $form.html(formTpl({\n            serial : response.serial,\n            identifier : interaction.attr('responseIdentifier')\n        }));\n\n        //init form javascript\n        formElement.initWidget($form);\n\n        //init data change callbacks\n        formElement.setChangeCallbacks($form, interaction, {\n            identifier : function identifier(i, value){\n                response.id(value);\n                interaction.attr('responseIdentifier', value);\n            }\n        });\n\n    };\n\n    return delorInteractionStateQuestion;\n});\n\n","/*\nCopyright DEPP - Ministère de l'éducation nationale \n*/\n\ndefine('delor/creator/widget/states/states',[\n    'taoQtiItem/qtiCreator/widgets/states/factory',\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/states/states',\n    'delor/creator/widget/states/Question'\n], function(factory, states){\n\t\"use strict\"; \n    return factory.createBundle(states, arguments, ['answer', 'correct', 'map']);\n});\n","/*\nCopyright DEPP - Ministère de l'éducation nationale \n*/\n\ndefine('delor/creator/widget/Widget',[\n    'taoQtiItem/qtiCreator/widgets/interactions/customInteraction/Widget',\n    'delor/creator/widget/states/states'\n], function(Widget, states){\n\n\t\"use strict\";\n\n    var delorInteractionWidget = Widget.clone();\n\n    delorInteractionWidget.initCreator = function initCreator(){\n        \n        this.registerStates(states);\n        \n        Widget.initCreator.call(this);\n    };\n    \n    return delorInteractionWidget;\n});\n","\ndefine('tpl!delor/creator/tpl/markup', ['handlebars'], function(hb){ \nreturn hb.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, helper, functionType=\"function\";\n\n\n  buffer += \"<div class=\\\"delor\\\">\\n    <div class=\\\"prompt\\\">\";\n  if (helper = helpers.prompt) { stack1 = helper.call(depth0, {hash:{},data:data}); }\n  else { helper = (depth0 && depth0.prompt); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"&nbsp;</div>\\n\\n    <div class=\\\"svghome\\\">&nbsp;</div>\\n\\n<div class=\\\"consigne\\\">Saisir la statuette à l'aide de votre souris pour la déposer sur l'instrument de votre choix.</div>\\n<div class=\\\"robi\\\">&nbsp;</div>\\n<div name=\\\"zonepese\\\" class=\\\"dropper zonepese\\\">&nbsp;</div>\\n<div name = \\\"zoneplonge\\\" class=\\\"dropper zoneplonge\\\" >&nbsp;</div>\\n<div name = \\\"zonesocle\\\" class=\\\"dropper zonesocle\\\" >&nbsp;</div>\\n<div class=\\\"lecvol\\\">&nbsp;</div>\\n<div class=\\\"deloransw\\\">&nbsp;</div>\\n    \\n</div>\";\n  return buffer;\n  });\n});\n\n","/*\nCopyright DEPP © 2017 - Ministère de l'éducation nationale  \n*/\n\ndefine('delor/pciCreator',[\n    'lodash',\n    'delor/creator/widget/Widget',\n    'tpl!delor/creator/tpl/markup'\n], function(_, Widget, markupTpl){\n\n    \"use strict\"; \n\n    var _typeIdentifier = 'delor';\n\n    var delorCreator = {\n        /**\n         * (required) Get the typeIdentifier of the custom interaction\n         * \n         * @returns {String}\n         */\n        getTypeIdentifier : function(){\n            return _typeIdentifier;\n        },\n        /**\n         * (required) Get the widget prototype\n         * Used in the renderer\n         * \n         * @returns {Object} Widget\n         */\n        getWidget : function(){\n            return Widget;\n        },\n        /**\n         * (optional) Get the default properties values of the pci.\n         * Used on new pci instance creation\n         * \n         * @returns {Object}\n         */\n        getDefaultProperties : function(pci){\n            \n        },\n        /**\n         * (optional) Callback to execute on the \n         * Used on new pci instance creation\n         * \n         * @returns {Object}\n         */\n        afterCreate : function(pci){\n           //TODO - fix me when more than one instance of such PCIs is implemented \n            $(\"div .delor\").each(function(index, el) {\n                if(this){\n                   // Todo fix multiple instance of pci in the same item \n                   //alert(\"Cette animation ne peut être dupliquée dans le même item\");  \n                }         \n            });\n            //do some stuff\n        },\n        /**\n         * (required) Gives the qti pci xml template \n         * \n         * @returns {function} handlebar template\n         */\n        getMarkupTemplate : function(){\n            return markupTpl;\n        },\n        /**\n         * (optional) Allows passing additional data to xml template\n         * \n         * @returns {function} handlebar template\n         */\n        getMarkupData : function(pci, defaultData){\n            defaultData.prompt = pci.data('prompt');\n            return defaultData;\n        }\n    };\n\n    return delorCreator;\n});\n"]}